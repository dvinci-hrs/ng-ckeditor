/*! ngCkeditor v0.2.1 by Vitalii Savchuk(esvit666@gmail.com) - https://github.com/esvit/ng-ckeditor - New BSD License */

"use strict";!function(a,b){return"function"==typeof define&&define.amd?void define(["angular","ckeditor"],function(a){return b(a)}):b(a)}(angular||null,function(a){var b,c=a.module("ngCkeditor",[]),d=!1;return c.run(["$q","$timeout",function(c,e){function f(){"loaded"===CKEDITOR.status?(d=!0,b.resolve()):f()}if(b=c.defer(),a.isUndefined(CKEDITOR))throw new Error("CKEDITOR not found");CKEDITOR.disableAutoInline=!0,CKEDITOR.on("loaded",f),e(f,100)}]),c.directive("ckeditor",["$timeout","$q",function(a,c){return{restrict:"AC",priority:1,require:["ngModel","^?form"],scope:{config:"=?ckeditor"},link:function(e,f,g,h){var i=h[0],j=h[1]||null,k="<p></p>",l="textarea"===f[0].tagName.toLowerCase(),m=[],n=!1,o=!1;l||f.attr("contenteditable",!0);var p=function(){var b=e.config||{},d=l?CKEDITOR.replace(f[0],b):CKEDITOR.inline(f[0],b),g=c.defer();f.bind("$destroy",function(){d&&CKEDITOR.instances[d.name]&&CKEDITOR.instances[d.name].destroy()});var h=function(b){var c=d.getData();""===c&&(c=null),a(function(){b===!0&&c===i.$viewValue||i.$setViewValue(c),b===!0&&j&&j.$setPristine()},0)},p=function(a){if(m.length){var b=m.pop()||k;o=!1,n=!1,d.setData(b,function(){h(a),n?p():o=!0})}};d.on("pasteState",h),d.on("change",h),d.on("blur",h),d.on("instanceReady",function(){e.$emit("ckeditor.ready",d),e.$apply(function(){p(!0)}),d.document.on("keyup",h)}),d.on("customConfigLoaded",function(){g.resolve()}),i.$render=function(){m.push(i.$viewValue),o?p():n=!0}};"loaded"===CKEDITOR.status&&(d=!0),d?p():b.promise.then(p)}}}]),c});
//# sourceMappingURL=ng-ckeditor.min.js.map